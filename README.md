# LADR - å­¦ä¹ åˆ†æä¸è¯Šæ–­æŠ¥å‘Šç³»ç»Ÿ

## ğŸ“– é¡¹ç›®ç®€ä»‹

LADRï¼ˆLearning Analytics and Diagnostic Reportï¼‰æ˜¯ä¸€ä¸ªåŸºäº Streamlit çš„å­¦ä¹ åˆ†æä¸è¯Šæ–­æŠ¥å‘Šç³»ç»Ÿï¼Œä¸“é—¨ç”¨äºç®¡ç†å­¦ç”Ÿè¯•å·ã€é¢˜ç›®åˆ†æå’Œé”™é¢˜è¯Šæ–­ã€‚ç³»ç»Ÿæä¾›äº†å®Œæ•´çš„è¯•å·ç®¡ç†ã€å›¾ç‰‡ä¸Šä¼ ã€é¢˜ç›®æ ‡æ³¨å’Œé”™é¢˜åˆ†æåŠŸèƒ½ã€‚

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æŠ€æœ¯æ ˆ
- **å‰ç«¯æ¡†æ¶**: Streamlit
- **åç«¯API**: FastAPI
- **æ•°æ®åº“**: Supabase (PostgreSQL)
- **äº‘å­˜å‚¨**: è…¾è®¯äº‘COS
- **æ•°æ®å¤„ç†**: Pandas, NumPy
- **å›¾åƒå¤„ç†**: PIL
- **æ•°æ®å¯è§†åŒ–**: Plotly

### æ¶æ„è®¾è®¡
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Streamlit     â”‚    â”‚    FastAPI      â”‚    â”‚    Supabase     â”‚
â”‚   å‰ç«¯ç•Œé¢       â”‚â—„â”€â”€â–ºâ”‚    APIæœåŠ¡      â”‚â—„â”€â”€â–ºâ”‚    æ•°æ®åº“       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â”‚                       â”‚                       â”‚
         â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   é¡µé¢ç»„ä»¶       â”‚    â”‚   ä¸šåŠ¡é€»è¾‘       â”‚    â”‚   æ•°æ®æ¨¡å‹       â”‚
â”‚   - è¯•å·ç®¡ç†     â”‚    â”‚   - CRUDæ“ä½œ     â”‚    â”‚   - ç”¨æˆ·è¡¨       â”‚
â”‚   - å›¾ç‰‡ç®¡ç†     â”‚    â”‚   - æ‰¹é‡å¤„ç†     â”‚    â”‚   - å­¦ç”Ÿè¡¨       â”‚
â”‚   - é¢˜ç›®æ ‡æ³¨     â”‚    â”‚   - æ•°æ®éªŒè¯     â”‚    â”‚   - è¯•å·è¡¨       â”‚
â”‚   - é”™é¢˜åˆ†æ     â”‚    â”‚   - é”™è¯¯å¤„ç†     â”‚    â”‚   - é¢˜ç›®è¡¨       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
ladr/
â”œâ”€â”€ .devcontainer/          # å¼€å‘å®¹å™¨é…ç½®
â”œâ”€â”€ .github/                # GitHubé…ç½®
â”œâ”€â”€ .streamlit/             # Streamlité…ç½®
â”œâ”€â”€ pages/                  # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ login.py           # ç™»å½•é¡µé¢
â”‚   â”œâ”€â”€ student_selection.py # å­¦ç”Ÿé€‰æ‹©
â”‚   â”œâ”€â”€ exam_papers.py     # è¯•å·ç®¡ç†
â”‚   â”œâ”€â”€ exam_paper_detail.py # è¯•å·è¯¦æƒ…
â”‚   â”œâ”€â”€ exam_paper_images.py # å›¾ç‰‡ç®¡ç†
â”‚   â”œâ”€â”€ knowledge_points.py # çŸ¥è¯†ç‚¹ç®¡ç†
â”‚   â””â”€â”€ error_analysis.py  # é”™é¢˜åˆ†æ
â”œâ”€â”€ streamlit_app.py       # ä¸»åº”ç”¨å…¥å£
â”œâ”€â”€ api_service.py         # APIæœåŠ¡å±‚
â”œâ”€â”€ api_routes.py          # APIè·¯ç”±å®šä¹‰
â”œâ”€â”€ models.py              # æ•°æ®æ¨¡å‹
â”œâ”€â”€ supabase_handler.py    # æ•°æ®åº“å¤„ç†
â”œâ”€â”€ cos_uploader.py        # äº‘å­˜å‚¨ç®¡ç†
â””â”€â”€ requirements.txt       # ä¾èµ–åŒ…
```

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### 1. ç”¨æˆ·ç®¡ç†
- ç”¨æˆ·ç™»å½•è®¤è¯
- å­¦ç”Ÿä¿¡æ¯ç®¡ç†
- å¤šå­¦ç”Ÿåˆ‡æ¢æ”¯æŒ

### 2. è¯•å·ç®¡ç†
- è¯•å·åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤
- è¯•å·åˆ—è¡¨å±•ç¤º
- æŒ‰å­¦ç”Ÿç­›é€‰è¯•å·
- è¯•å·ç»Ÿè®¡ä¿¡æ¯ï¼ˆæ€»é¢˜æ•°ã€é”™é¢˜æ•°ã€é”™è¯¯ç‡ï¼‰

### 3. å›¾ç‰‡ç®¡ç†
- è¯•å·å›¾ç‰‡ä¸Šä¼ ï¼ˆæ”¯æŒè…¾è®¯äº‘COSï¼‰
- å›¾ç‰‡é¢„è§ˆå’Œç®¡ç†
- æ‰¹é‡å›¾ç‰‡æ“ä½œ
- å›¾ç‰‡URLç­¾åè®¿é—®

### 4. é¢˜ç›®ç®¡ç†
- å•ä¸ªé¢˜ç›®æ·»åŠ å’Œç¼–è¾‘
- æ‰¹é‡é¢˜ç›®å¯¼å…¥ï¼ˆJSONæ ¼å¼ï¼‰
- é¢˜ç›®æ­£è¯¯æ ‡æ³¨
- é¢˜ç›®å†…å®¹ç®¡ç†
- å›¾ç‰‡å…³è”ç®¡ç†

### 5. çŸ¥è¯†ç‚¹ç®¡ç†
- çŸ¥è¯†ç‚¹åˆ›å»ºå’Œç®¡ç†
- é¢˜ç›®ä¸çŸ¥è¯†ç‚¹å…³è”
- çŸ¥è¯†ç‚¹ç»Ÿè®¡åˆ†æ

### 6. é”™é¢˜åˆ†æ
- é”™é¢˜ç»Ÿè®¡å’Œå¯è§†åŒ–
- æŒ‰çŸ¥è¯†ç‚¹åˆ†æé”™é¢˜åˆ†å¸ƒ
- å­¦ä¹ è¯Šæ–­æŠ¥å‘Š
- æ•°æ®å¯¼å‡ºåŠŸèƒ½

## ğŸ› ï¸ å®‰è£…å’Œéƒ¨ç½²

### ç¯å¢ƒè¦æ±‚
- Python 3.8+
- pip åŒ…ç®¡ç†å™¨

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
```bash
git clone <repository-url>
cd ladr
```

2. **å®‰è£…ä¾èµ–**
```bash
pip3 install -r requirements.txt
```

3. **é…ç½®ç¯å¢ƒ**

åˆ›å»º `.streamlit/secrets.toml` æ–‡ä»¶ï¼š
```toml
[supabase]
url = "your-supabase-url"
key = "your-supabase-key"

[oss]
secret_id = "your-cos-secret-id"
secret_key = "your-cos-secret-key"
region = "ap-beijing"
bucket_name = "your-bucket-name"
```

4. **å¯åŠ¨åº”ç”¨**
```bash
streamlit run streamlit_app.py
```

### Docker éƒ¨ç½²ï¼ˆå¯é€‰ï¼‰

å¦‚æœé¡¹ç›®åŒ…å« `.devcontainer` é…ç½®ï¼Œå¯ä»¥ä½¿ç”¨ Docker è¿›è¡Œéƒ¨ç½²ï¼š

```bash
# ä½¿ç”¨å¼€å‘å®¹å™¨
code . # åœ¨VS Codeä¸­æ‰“å¼€ï¼Œé€‰æ‹©åœ¨å®¹å™¨ä¸­é‡æ–°æ‰“å¼€
```

## ğŸ“Š æ•°æ®åº“è®¾è®¡

### æ ¸å¿ƒæ•°æ®è¡¨

1. **user** - ç”¨æˆ·è¡¨
   - id, username, password_hash, created_at

2. **student** - å­¦ç”Ÿè¡¨
   - id, user_id, name, created_at

3. **exam_paper** - è¯•å·è¡¨
   - id, student_id, title, description, created_time

4. **exam_paper_image** - è¯•å·å›¾ç‰‡è¡¨
   - id, exam_paper_id, image_url, upload_order

5. **question** - é¢˜ç›®è¡¨
   - id, exam_paper_id, image_id, student_id, content, is_correct, remark

6. **knowledge_point** - çŸ¥è¯†ç‚¹è¡¨
   - id, name

7. **question_knowledge_point** - é¢˜ç›®çŸ¥è¯†ç‚¹å…³è”è¡¨
   - id, question_id, knowledge_point_id

### å…³ç³»è®¾è®¡
- å­¦ç”Ÿä¸è¯•å·ï¼šä¸€å¯¹å¤š
- è¯•å·ä¸å›¾ç‰‡ï¼šä¸€å¯¹å¤š
- è¯•å·ä¸é¢˜ç›®ï¼šä¸€å¯¹å¤š
- é¢˜ç›®ä¸çŸ¥è¯†ç‚¹ï¼šå¤šå¯¹å¤š
- é¢˜ç›®ä¸å›¾ç‰‡ï¼šå¤šå¯¹ä¸€

## ğŸ”§ API æ¥å£

### RESTful API è®¾è®¡

æ‰€æœ‰APIéµå¾ªRESTfulè®¾è®¡åŸåˆ™ï¼Œæ”¯æŒæ ‡å‡†çš„CRUDæ“ä½œï¼š

- `GET /api/{resource}` - è·å–èµ„æºåˆ—è¡¨
- `GET /api/{resource}/{id}` - è·å–å•ä¸ªèµ„æº
- `POST /api/{resource}` - åˆ›å»ºèµ„æº
- `PUT /api/{resource}/{id}` - æ›´æ–°èµ„æº
- `DELETE /api/{resource}/{id}` - åˆ é™¤èµ„æº

### æ”¯æŒçš„èµ„æº
- users - ç”¨æˆ·ç®¡ç†
- students - å­¦ç”Ÿç®¡ç†
- exam_papers - è¯•å·ç®¡ç†
- exam_paper_images - å›¾ç‰‡ç®¡ç†
- questions - é¢˜ç›®ç®¡ç†
- knowledge_points - çŸ¥è¯†ç‚¹ç®¡ç†
- question_knowledge_points - å…³è”å…³ç³»ç®¡ç†

### ç‰¹æ®Šæ¥å£
- `POST /api/questions/batch` - æ‰¹é‡åˆ›å»ºé¢˜ç›®

## ğŸ¯ ä½¿ç”¨æŒ‡å—

### åŸºæœ¬å·¥ä½œæµç¨‹

1. **ç™»å½•ç³»ç»Ÿ**
   - ä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç ç™»å½•
   - ç³»ç»Ÿä¼šä¿æŒç™»å½•çŠ¶æ€

2. **é€‰æ‹©å­¦ç”Ÿ**
   - åœ¨å­¦ç”Ÿé€‰æ‹©é¡µé¢é€‰æ‹©è¦ç®¡ç†çš„å­¦ç”Ÿ
   - ç³»ç»Ÿä¼šè®°ä½å½“å‰é€‰æ‹©çš„å­¦ç”Ÿ

3. **åˆ›å»ºè¯•å·**
   - åœ¨è¯•å·ç®¡ç†é¡µé¢åˆ›å»ºæ–°è¯•å·
   - å¡«å†™è¯•å·æ ‡é¢˜å’Œæè¿°

4. **ä¸Šä¼ å›¾ç‰‡**
   - åœ¨è¯•å·å›¾ç‰‡ç®¡ç†é¡µé¢ä¸Šä¼ è¯•å·å›¾ç‰‡
   - æ”¯æŒå¤šå¼ å›¾ç‰‡ä¸Šä¼ 

5. **æ·»åŠ é¢˜ç›®**
   - åœ¨è¯•å·è¯¦æƒ…é¡µé¢æ·»åŠ é¢˜ç›®
   - å¯ä»¥å•ä¸ªæ·»åŠ æˆ–æ‰¹é‡å¯¼å…¥
   - æ ‡æ³¨é¢˜ç›®æ­£è¯¯çŠ¶æ€

6. **åˆ†æé”™é¢˜**
   - åœ¨é”™é¢˜åˆ†æé¡µé¢æŸ¥çœ‹ç»Ÿè®¡æ•°æ®
   - ç”Ÿæˆå­¦ä¹ è¯Šæ–­æŠ¥å‘Š

### æ‰¹é‡é¢˜ç›®å¯¼å…¥æ ¼å¼

```json
[
  {
    "content": "é¢˜ç›®å†…å®¹",
    "is_correct": true
  },
  {
    "content": "é¢˜ç›®å†…å®¹",
    "is_correct": false
  }
]
```

## ğŸ”’ å®‰å…¨ç‰¹æ€§

- ç”¨æˆ·å¯†ç å“ˆå¸Œå­˜å‚¨
- ä¼šè¯çŠ¶æ€ç®¡ç†
- APIè¯·æ±‚éªŒè¯
- å›¾ç‰‡URLç­¾åè®¿é—®
- è·¨åŸŸè¯·æ±‚ä¿æŠ¤

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

- Streamlitç¼“å­˜æœºåˆ¶ï¼ˆ@st.cache_dataï¼‰
- æ•°æ®åº“è¿æ¥æ± 
- å›¾ç‰‡æ‡’åŠ è½½
- åˆ†é¡µæŸ¥è¯¢æ”¯æŒ
- å¼‚æ­¥å¤„ç†ä¼˜åŒ–

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   - æ£€æŸ¥ Supabase é…ç½®æ˜¯å¦æ­£ç¡®
   - ç¡®è®¤ç½‘ç»œè¿æ¥æ­£å¸¸

2. **å›¾ç‰‡ä¸Šä¼ å¤±è´¥**
   - æ£€æŸ¥è…¾è®¯äº‘COSé…ç½®
   - ç¡®è®¤å­˜å‚¨æ¡¶æƒé™è®¾ç½®

3. **é¢˜ç›®åˆ›å»ºå¤±è´¥**
   - ç¡®ä¿å¿…éœ€å­—æ®µå®Œæ•´ï¼ˆimage_id, student_idï¼‰
   - æ£€æŸ¥æ•°æ®æ ¼å¼æ˜¯å¦æ­£ç¡®

### è°ƒè¯•æ¨¡å¼

åœ¨é¢˜ç›®ç®¡ç†é¡µé¢å¯ç”¨è°ƒè¯•æ¨¡å¼å¯ä»¥æŸ¥çœ‹è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œè¯·æ±‚æ•°æ®ã€‚

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- é¡¹ç›®Issues: [GitHub Issues](https://github.com/your-repo/ladr/issues)
- é‚®ç®±: your-email@example.com

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…å’Œç”¨æˆ·ã€‚

---

**æ³¨æ„**: è¯·ç¡®ä¿åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ­£ç¡®é…ç½®æ‰€æœ‰æ•æ„Ÿä¿¡æ¯ï¼Œä¸è¦å°†å¯†é’¥å’Œé…ç½®ä¿¡æ¯æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸­ã€‚
